import{as as g,aj as P,a as k,l as p,o as h,I as v,q as t,n as l,m as $,M as q,Q as f,ak as u,al as M,B}from"./index-4e66693d.js";import{E as T}from"./el-overlay-5d7acc48.js";import{a as U,b as F,E as I}from"./el-input-b637a84d.js";import{E as N}from"./el-card-edaa3394.js";import{E as A}from"./el-select-dee45c9f.js";import"./el-tag-3aed28f9.js";import{E as j,a as O}from"./el-table-column-1b23615c.js";import{E as R}from"./el-button-bad787b3.js";/* empty css                   */import{E as G}from"./el-message-box-a940a289.js";import{E as s}from"./index-11be697d.js";import"./refs-cbced2c2.js";import"./scroll-45713807.js";import"./_initCloneObject-b40d657f.js";import"./index-88ab3c4a.js";import"./debounce-562d200a.js";import"./validator-55a3f62c.js";const Q=e=>g.request({url:"/mall/ums-member-statistics-info/page",method:"post",data:e}),H=e=>g.request({url:"/mall/ums-member-receive-address/add",method:"POST",data:e}),J=e=>g.request({url:"/mall/ums-member-receive-address/del/"+e.id,method:"GET"}),K=e=>g.request({url:"/mall/ums-member-receive-address/edit",method:"POST",data:e});const L=k({data(){return{requestData:{current:1,size:10},resuleData:{},dialogVisible:!1,itemData:{},isEdit:!1,rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},userStatus:!1}},methods:{changStatus(e){this.userStatus=e,this.itemData.status=this.userStatus?1:0},findPage(){Q(this.requestData).then(e=>{console.log(e),this.resuleData=e.data.page})},handleSizeChange(e){this.requestData.size=e,this.findPage()},handleCurrentChange(e){this.requestData.current=e,this.findPage()},showDialog(){this.isEdit=!1,this.itemData={},this.dialogVisible=!0},confirm(){this.$refs.dialogForm.validate(e=>{if(e)this.itemData.createTime=new Date,H(this.itemData).then(a=>{a.code===1?(this.dialogVisible=!1,s({message:"新增成功",type:"success"}),this.findPage()):s({message:"新增失败",type:"error"})});else return!1})},confire(){this.dialogVisible=!1,this.itemData={}},showEdit(e){this.isEdit=!0,this.userStatus=e.status!=0,this.itemData={id:e.id,growth:e.growth,intergration:e.intergration,name:e.name,type:e.type},console.log(this.itemData),this.dialogVisible=!0},editConfirm(){this.$refs.dialogForm.validate(e=>{if(e)K(this.itemData).then(a=>{a.code===1?(this.dialogVisible=!1,s({message:"修改成功",type:"success"}),this.findPage()):s({message:"修改失败",type:"error"})});else return!1})},del(e){console.log(e),G.confirm("是否删除该记录?","删除数据",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{J({id:e.id}).then(a=>{a.code===1?(s({type:"success",message:"删除成功"}),this.findPage()):s({type:"error",message:"删除失败"})})}).catch(()=>{s({type:"info",message:"取消删除"})})}},mounted(){this.findPage()}}),W={class:"rig"},X=f("div",{class:"title"},"用户统计信息管理",-1),Y={class:"dialog-footer"};function Z(e,a,x,ee,te,ae){const r=U,c=p("Search"),m=B,n=R,b=p("Plus"),C=p("Refresh"),i=j,D=p("EditPen"),V=p("Delete"),y=O,E=A,w=N,d=F,_=I,S=T;return h(),v("div",null,[t(w,null,{default:l(()=>[f("div",W,[X,t(r,{modelValue:e.input,"onUpdate:modelValue":a[0]||(a[0]=o=>e.input=o),class:"w-50 m-2",style:{width:"200px","margin-bottom":"10px"},placeholder:"请输入id","suffix-icon":e.Search},null,8,["modelValue","suffix-icon"]),t(n,{icon:e.Search,circle:"",style:{"margin-bottom":"10px","margin-left":"5px"},onClick:e.search},{default:l(()=>[t(m,null,{default:l(()=>[t(c)]),_:1})]),_:1},8,["icon","onClick"]),t(n,{type:"primary",style:{"margin-left":"50px","margin-bottom":"10px"},onClick:a[1]||(a[1]=o=>e.showDialog())},{default:l(()=>[t(m,null,{default:l(()=>[t(b)]),_:1}),u("添加信息")]),_:1}),t(n,{type:"success",style:{"margin-left":"40px","margin-bottom":"10px"},onClick:a[2]||(a[2]=o=>e.update())},{default:l(()=>[t(m,null,{default:l(()=>[t(C)]),_:1})]),_:1})]),f("div",null,[t(y,{data:e.resuleData.records,stripe:"",style:{width:"100%",height:"590px"},"row-style":{height:"60px"},border:""},{default:l(()=>[t(i,{prop:"id",label:"编号",width:"250",align:"center"},{default:l(o=>[u(M((e.resuleData.current-1)*e.resuleData.size+o.$index+1),1)]),_:1}),t(i,{prop:"id",label:"id",align:"center"}),t(i,{prop:"attendCount",label:"关注数量",align:"center"}),t(i,{prop:"commentCount",label:"评价数",align:"center"}),t(i,{prop:"consumeAmount",label:"累计消费金额",align:"center"}),t(i,{prop:"couponCount",label:"优惠券数量",align:"center"}),t(i,{prop:"fansCount",label:"粉丝数量",align:"center"}),t(i,{label:"功能管理",fixed:"right",width:"180",align:"center"},{default:l(o=>[t(n,{size:"small",onClick:z=>e.showEdit(o.row)},{default:l(()=>[t(m,null,{default:l(()=>[t(D)]),_:1}),u("编辑")]),_:2},1032,["onClick"]),t(n,{size:"small",type:"danger",onClick:z=>e.del(o.row)},{default:l(()=>[t(m,null,{default:l(()=>[t(V)]),_:1}),u("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),f("div",null,[t(E,{"current-page":e.resuleData.current,"onUpdate:currentPage":a[3]||(a[3]=o=>e.resuleData.current=o),"page-size":e.resuleData.size,"onUpdate:pageSize":a[4]||(a[4]=o=>e.resuleData.size=o),"page-sizes":[10,20,30,40],layout:"total, prev, pager, next, jumper, sizes",total:e.resuleData.total,onSizeChange:e.handleSizeChange,onCurrentChange:e.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])]),_:1}),e.dialogVisible?(h(),$(S,{key:0,modelValue:e.dialogVisible,"onUpdate:modelValue":a[12]||(a[12]=o=>e.dialogVisible=o),title:e.isEdit?"修改数据":"新增数据",width:"600px"},{footer:l(()=>[f("span",Y,[t(n,{type:"Plus",onClick:a[10]||(a[10]=o=>e.confire())},{default:l(()=>[u("取消")]),_:1}),t(n,{type:"success",onClick:a[11]||(a[11]=o=>e.isEdit?e.editConfirm():e.confirm())},{default:l(()=>[u("确认")]),_:1})])]),default:l(()=>[t(_,{ref:"dialogForm",model:e.itemData,rules:e.rules},{default:l(()=>[t(d,{label:"成长值","label-width":100,prop:"growth"},{default:l(()=>[t(r,{modelValue:e.itemData.attendCount,"onUpdate:modelValue":a[5]||(a[5]=o=>e.itemData.attendCount=o),modelModifiers:{number:!0},autocomplete:"off",type:"text"},null,8,["modelValue"])]),_:1}),t(d,{label:"积分","label-width":100,prop:"intergration"},{default:l(()=>[t(r,{modelValue:e.itemData.commentCount,"onUpdate:modelValue":a[6]||(a[6]=o=>e.itemData.commentCount=o),modelModifiers:{number:!0},autocomplete:"off",type:"text"},null,8,["modelValue"])]),_:1}),t(d,{label:"名称","label-width":100,prop:"name"},{default:l(()=>[t(r,{modelValue:e.itemData.consumeAmount,"onUpdate:modelValue":a[7]||(a[7]=o=>e.itemData.consumeAmount=o),modelModifiers:{number:!0},autocomplete:"off",type:"text"},null,8,["modelValue"])]),_:1}),t(d,{label:"任务类型","label-width":100,prop:"type"},{default:l(()=>[t(r,{modelValue:e.itemData.couponCount,"onUpdate:modelValue":a[8]||(a[8]=o=>e.itemData.couponCount=o),modelModifiers:{number:!0},autocomplete:"off",type:"text"},null,8,["modelValue"])]),_:1}),t(d,{label:"名称","label-width":100,prop:"name"},{default:l(()=>[t(r,{modelValue:e.itemData.fansCount,"onUpdate:modelValue":a[9]||(a[9]=o=>e.itemData.fansCount=o),modelModifiers:{number:!0},autocomplete:"off",type:"text"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])):q("",!0)])}const Ve=P(L,[["render",Z]]);export{Ve as default};
