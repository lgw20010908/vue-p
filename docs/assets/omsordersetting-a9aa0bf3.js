import{as as f,aj as v,a as w,o as p,I as V,Q as u,q as i,n as r,m as E,M as C,ak as s,al as y}from"./index-e913ff2d.js";import{E as c}from"./el-overlay-a4518769.js";import{a as z,b as q,E as k}from"./el-input-cb7f48d8.js";import{E as $}from"./el-select-3f5c59ab.js";import"./el-tag-185b0755.js";import{a as P,E as B}from"./el-table-column-293e55d3.js";import{E as U}from"./el-button-dfd295e9.js";import{E as L}from"./el-message-box-871e55a1.js";import{E as o}from"./index-c657a219.js";import"./refs-0f2c73b3.js";import"./scroll-2f74979b.js";import"./_initCloneObject-e19fe7d2.js";import"./index-68f3b845.js";import"./debounce-35ee1cfa.js";import"./validator-c4ae5d88.js";const S=e=>f.request({url:"/mall/oms-order-setting/page",method:"post",data:e}),T=e=>f.request({url:"/mall/oms-order-setting/add",method:"post",data:e}),F=e=>f.request({url:"/mall/oms-order-setting/del/"+e.id,method:"get"}),W=e=>f.request({url:"/mall/oms-order-setting/edit",method:"post",data:e}),N=w({data(){return{requestData:{current:1,size:5},relsetData:{},dialogVisible:!1,itemData:{},isEdit:!1,orders:{commentOvertime:[{required:!0,message:"请输入订单完成后自动好评时间（天",trigger:"blur"}],confirmOvertime:[{required:!0,message:"请输入发货后自动确认收货时间（天",trigger:"blur"}],finishOvertime:[{required:!0,message:"请输入秒杀订单超时关闭时间(分)",trigger:"blur"}],flashOrderOvertime:[{required:!0,message:"请输入正常订单超时时间(分)",trigger:"blur"}],normalOrderOvertime:[{required:!0,message:"每笔正常订单超时时间(分)",trigger:"blur"}]}}},methods:{findPage(){S(this.requestData).then(e=>{this.relsetData=e.data.page})},handleSizeChange(e){this.requestData.size=e,this.findPage()},handleCurrentChange(e){this.requestData.current=e,this.findPage()},showDialog(){this.isEdit=!1,this.itemData={},this.dialogVisible=!0},confirm(){this.$refs.dialogForm.validate(e=>{if(e)this.itemData.createTime=new Date,T(this.itemData).then(t=>{t.code===1?(this.dialogVisible=!1,o({message:"新增成功",type:"success"}),this.findPage()):o({message:"新增失败",type:"error"})});else return!1})},confire(){this.dialogVisible=!1,this.itemData={}},showEdit(e){this.isEdit=!0,this.itemData={id:e.id,commentOvertime:e.commentOvertime,confirmOvertime:e.confirmOvertime,finishOvertime:e.finishOvertime,flashOrderOvertime:e.flashOrderOvertime,normalOrderOvertime:e.normalOrderOvertime},this.dialogVisible=!0},editConfirm(){this.$refs.dialogForm.validate(e=>{if(e)W(this.itemData).then(t=>{t.code===1?(this.dialogVisible=!1,o({message:"修改成功",type:"success"}),this.findPage()):o({message:"修改失败",type:"error"})});else return!1})},del(e){console.log(e),L.confirm("是否删除该记录?","删除数据",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{F({id:e.id}).then(t=>{t.code===1?(o({type:"success",message:"删除成功"}),this.findPage()):o({type:"error",message:"删除失败"})})}).catch(()=>{o({type:"info",message:"取消删除"})})}},mounted(){this.findPage()}}),I={class:"order"},M=u("h2",null,"订单设置表",-1),j={class:"dialog-footer"};function Q(e,t,A,G,H,J){const n=U,l=B,g=P,h=$,m=z,d=q,b=k,O=c;return p(),V("div",null,[u("div",I,[M,i(n,{type:"warning",plain:"",icon:"Edit",onClick:t[0]||(t[0]=a=>e.showDialog())},{default:r(()=>[s("新增")]),_:1})]),u("div",null,[i(g,{data:e.relsetData.records,stripe:"true",border:"true",style:{width:"100%"}},{default:r(()=>[i(l,{label:"编号",width:"180"},{default:r(a=>[s(y((e.relsetData.current-1)*e.relsetData.size+a.$index+1),1)]),_:1}),i(l,{prop:"commentOvertime",label:"订单完成后自动好评时间（天）",width:"120"}),i(l,{prop:"confirmOvertime",label:"发货后自动确认收货时间（天）",width:"150"}),i(l,{prop:"finishOvertime",label:"自动完成交易时间，不能申请售后（天）",width:"130"}),i(l,{prop:"flashOrderOvertime",label:"秒杀订单超时关闭时间(分)",width:"180"}),i(l,{prop:"normalOrderOvertime",label:"正常订单超时时间(分)",width:"170"}),i(l,{label:"操作"},{default:r(a=>[i(n,{size:"small",type:"success",plain:"",round:"",onClick:D=>e.showEdit(a.row)},{default:r(()=>[s("编辑")]),_:2},1032,["onClick"]),i(n,{size:"small",type:"danger",plain:"",round:"",onClick:D=>e.del(a.row)},{default:r(()=>[s("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),u("div",null,[i(h,{"current-page":e.relsetData.current,"onUpdate:currentPage":t[1]||(t[1]=a=>e.relsetData.current=a),"page-size":e.relsetData.size,"onUpdate:pageSize":t[2]||(t[2]=a=>e.relsetData.size=a),"page-sizes":[4,8,12,16],layout:"total, sizes, prev, pager, next, jumper",total:e.relsetData.total,onSizeChange:e.handleSizeChange,onCurrentChange:e.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])]),e.dialogVisible?(p(),E(O,{key:0,modelValue:e.dialogVisible,"onUpdate:modelValue":t[10]||(t[10]=a=>e.dialogVisible=a),title:e.isEdit?"修改数据":"新增数据",width:"400px"},{footer:r(()=>[u("span",j,[i(n,{type:"primary",onClick:t[8]||(t[8]=a=>e.confire())},{default:r(()=>[s("取消")]),_:1}),i(n,{type:"primary",onClick:t[9]||(t[9]=a=>e.isEdit?e.editConfirm():e.confirm())},{default:r(()=>[s("确认")]),_:1})])]),default:r(()=>[i(b,{ref:"dialogForm",model:e.itemData,order:e.orders},{default:r(()=>[i(d,{label:"订单完成后自动好评时间（天）","label-width":e.formLabelWidth},{default:r(()=>[i(m,{modelValue:e.itemData.commentOvertime,"onUpdate:modelValue":t[3]||(t[3]=a=>e.itemData.commentOvertime=a),autocomplete:"off",style:{width:"150px"}},null,8,["modelValue"])]),_:1},8,["label-width"]),i(d,{label:"发货后自动确认收货时间（天）","label-width":e.formLabelWidth},{default:r(()=>[i(m,{modelValue:e.itemData.confirmOvertime,"onUpdate:modelValue":t[4]||(t[4]=a=>e.itemData.confirmOvertime=a),autocomplete:"off",style:{width:"150px"}},null,8,["modelValue"])]),_:1},8,["label-width"]),i(d,{label:"自动完成交易时间，不能申请售后（天","label-width":e.formLabelWidth},{default:r(()=>[i(m,{modelValue:e.itemData.finishOvertime,"onUpdate:modelValue":t[5]||(t[5]=a=>e.itemData.finishOvertime=a),autocomplete:"off",style:{width:"150px"}},null,8,["modelValue"])]),_:1},8,["label-width"]),i(d,{label:"秒杀订单超时关闭时间(分)","label-width":e.formLabelWidth},{default:r(()=>[i(m,{modelValue:e.itemData.flashOrderOvertime,"onUpdate:modelValue":t[6]||(t[6]=a=>e.itemData.flashOrderOvertime=a),autocomplete:"off",style:{width:"150px"}},null,8,["modelValue"])]),_:1},8,["label-width"]),i(d,{label:"正常订单超时时间(分)","label-width":e.formLabelWidth},{default:r(()=>[i(m,{modelValue:e.itemData.normalOrderOvertime,"onUpdate:modelValue":t[7]||(t[7]=a=>e.itemData.normalOrderOvertime=a),autocomplete:"off",style:{width:"150px"}},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model","order"])]),_:1},8,["modelValue","title"])):C("",!0)])}const ne=v(N,[["render",Q]]);export{ne as default};
