import{as as h,aj as $,a as q,l as f,o as b,I,q as t,n as o,m as M,M as T,Q as d,ak as u,al as U,B as A}from"./index-4e66693d.js";import{E as B}from"./el-overlay-5d7acc48.js";import{a as N,b as F,E as O}from"./el-input-b637a84d.js";import{E as j}from"./el-switch-0bad3d39.js";import{E as G}from"./el-cascader-panel-345f14e9.js";import"./el-tag-3aed28f9.js";import{E as R,a as Q}from"./el-table-column-1b23615c.js";/* empty css                 */import{E as H}from"./el-card-edaa3394.js";import{E as J}from"./el-select-dee45c9f.js";import{E as K}from"./el-button-bad787b3.js";/* empty css                   */import{E as L}from"./el-message-box-a940a289.js";import{E as r}from"./index-11be697d.js";import"./refs-cbced2c2.js";import"./scroll-45713807.js";import"./_initCloneObject-b40d657f.js";import"./validator-55a3f62c.js";import"./index-d1b0e0d2.js";import"./index-88ab3c4a.js";import"./cloneDeep-4dfd5273.js";import"./debounce-562d200a.js";const W=e=>h.request({url:"/mall/ums-member-receive-address/page",method:"post",data:e}),X=e=>h.request({url:"/mall/ums-member-receive-address/one/"+e.id,method:"GET"}),Y=e=>h.request({url:"/mall/ums-member-receive-address/add",method:"POST",data:e}),Z=e=>h.request({url:"/mall/ums-member-receive-address/del/"+e.id,method:"GET"}),x=e=>h.request({url:"/mall/ums-member-receive-address/edit",method:"POST",data:e});const ee=q({data(){return{value1:!1,value:[],options:[{value:"福建省",label:"福建省",children:[{value:"泉州市",label:"泉州市",children:[{value:"丰泽区",label:"丰泽区"},{value:"南安市",label:"南安市"},{value:"晋江市",label:"晋江市"}]},{value:"厦门市",label:"厦门市",children:[{value:"集美区",label:"集美区"},{value:"思明区",label:"思明区"},{value:"同安县",label:"同安县"}]}]},{value:"江西省",label:"江西省",children:[{value:"吉安市",label:"吉安市",children:[{value:"遂川县",label:"遂川县"},{value:"万安县",label:"万安县"}]},{value:"九江市",label:"九江市",children:[{value:"瑞昌市",label:"瑞昌市"}]}]},{value:"湖南省",label:"湖南省",children:[{value:"长沙市",label:"长沙市",children:[{value:"长沙市",label:"长沙市"}]}]}],input:"",requestData:{current:1,size:10},showData:[],resuleData:{},dialogVisible:!1,itemData:{},isEdit:!1,rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},userStatus:!1}},methods:{form_defaut(e,l,g){return g===0?"否":"是"},update(){this.findPage()},search(){X({id:this.input}).then(e=>{console.log(e),this.showData=[],this.showData[0]=e.data.help,this.input=""})},handleChange(){this.itemData.city=this.value[2],this.itemData.province=this.value[0],this.itemData.region=this.value[1],console.log(this.value[0])},changStatus(e){this.userStatus=e,this.itemData.status=this.userStatus?1:0},findPage(){W(this.requestData).then(e=>{console.log(e),this.resuleData=e.data.page,this.showData=this.resuleData.records})},handleSizeChange(e){this.requestData.size=e,this.findPage()},handleCurrentChange(e){this.requestData.current=e,this.findPage()},showDialog(){this.isEdit=!1,this.itemData={},this.value=[],this.value1=!1,this.dialogVisible=!0},confirm(){this.value1?this.itemData.defaultStatus=1:this.itemData.defaultStatus=0,this.$refs.dialogForm.validate(e=>{if(e)this.itemData.createTime=new Date,Y(this.itemData).then(l=>{l.code===1?(this.dialogVisible=!1,r({message:"新增成功",type:"success"}),this.findPage(),console.log(this.itemData)):r({message:"新增失败",type:"error"})});else return!1})},confire(){this.dialogVisible=!1,this.itemData={},this.value=[]},showEdit(e){this.isEdit=!0,this.itemData={id:e.id,name:e.name,detailAddress:e.detailAddress,phoneNumber:e.phoneNumber,memberId:e.memberId},e.defaultStatus==0?this.value1=!1:e.defaultStatus==1&&(this.value1=!0),this.value[0]=e.city,this.value[1]=e.region,this.value[2]=e.province,console.log(e),console.log(this.value,e.defautStatus,this.value1),console.log(this.itemData),this.dialogVisible=!0},editConfirm(){this.value1?this.itemData.defaultStatus=1:this.itemData.defaultStatus=0,this.$refs.dialogForm.validate(e=>{if(e)x(this.itemData).then(l=>{console.log(l),l.code===1?(this.dialogVisible=!1,r({message:"修改成功",type:"success"}),this.findPage()):r({message:"修改失败",type:"error"})});else return!1})},del(e){console.log(e),L.confirm("是否删除该记录?","删除数据",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Z({id:e.id}).then(l=>{l.code===1?(r({type:"success",message:"删除成功"}),this.findPage()):r({type:"error",message:"删除失败"})})}).catch(()=>{r({type:"info",message:"取消删除"})})}},mounted(){this.findPage()}}),te={class:"rig"},le=d("div",{class:"title"},"用户收货地址管理",-1),ae={class:"m-4"},oe={class:"dialog-footer"};function se(e,l,g,ie,re,ne){const m=N,c=f("Search"),p=A,i=K,v=f("Plus"),D=f("Refresh"),s=R,V=f("EditPen"),E=f("Delete"),y=Q,C=J,w=H,S=G,n=F,_=j,P=O,z=B;return b(),I("div",null,[t(w,null,{default:o(()=>[d("div",te,[le,t(m,{modelValue:e.input,"onUpdate:modelValue":l[0]||(l[0]=a=>e.input=a),class:"w-50 m-2",style:{width:"200px","margin-bottom":"10px"},placeholder:"请输入id","suffix-icon":e.Search},null,8,["modelValue","suffix-icon"]),t(i,{icon:e.Search,circle:"",style:{"margin-bottom":"10px","margin-left":"5px"},onClick:e.search},{default:o(()=>[t(p,null,{default:o(()=>[t(c)]),_:1})]),_:1},8,["icon","onClick"]),t(i,{type:"primary",style:{"margin-left":"50px","margin-bottom":"10px"},onClick:l[1]||(l[1]=a=>e.showDialog())},{default:o(()=>[t(p,null,{default:o(()=>[t(v)]),_:1}),u("添加信息")]),_:1}),t(i,{type:"success",style:{"margin-left":"40px","margin-bottom":"10px"},onClick:l[2]||(l[2]=a=>e.update())},{default:o(()=>[t(p,null,{default:o(()=>[t(D)]),_:1})]),_:1})]),d("div",null,[t(y,{data:e.showData,stripe:"",style:{width:"100%",height:"590px"},"row-style":{height:"60px"},border:""},{default:o(()=>[t(s,{prop:"id",label:"编号",align:"center"},{default:o(a=>[u(U((e.resuleData.current-1)*e.resuleData.size+a.$index+1),1)]),_:1}),t(s,{prop:"name",label:"收货人名称",align:"center"}),t(s,{prop:"id",label:"id",align:"center"}),t(s,{prop:"memberId",label:"memberid",align:"center"}),t(s,{prop:"phoneNumber",label:"手机号",width:"200",align:"center"}),t(s,{prop:"defaultStatus",label:"是否为默认",formatter:e.form_defaut,align:"center"},null,8,["formatter"]),t(s,{prop:"province",label:"省份",align:"center"}),t(s,{prop:"region",label:"市级",align:"center"}),t(s,{prop:"city",label:"城市",align:"center"}),t(s,{prop:"detailAddress",label:"详细地址（街道）",width:"250",align:"center"}),t(s,{label:"功能管理",fixed:"right",width:"180",align:"center"},{default:o(a=>[t(i,{size:"small",onClick:k=>e.showEdit(a.row)},{default:o(()=>[t(p,null,{default:o(()=>[t(V)]),_:1}),u("编辑")]),_:2},1032,["onClick"]),t(i,{size:"small",type:"danger",onClick:k=>e.del(a.row)},{default:o(()=>[t(p,null,{default:o(()=>[t(E)]),_:1}),u("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),d("div",null,[t(C,{"current-page":e.resuleData.current,"onUpdate:currentPage":l[3]||(l[3]=a=>e.resuleData.current=a),"page-size":e.resuleData.size,"onUpdate:pageSize":l[4]||(l[4]=a=>e.resuleData.size=a),"page-sizes":[10,20,30,40],layout:"total, prev, pager, next, jumper, sizes",total:e.resuleData.total,onSizeChange:e.handleSizeChange,onCurrentChange:e.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])]),_:1}),e.dialogVisible?(b(),M(z,{key:0,modelValue:e.dialogVisible,"onUpdate:modelValue":l[13]||(l[13]=a=>e.dialogVisible=a),title:e.isEdit?"修改数据":"新增数据",width:"600px"},{footer:o(()=>[d("span",oe,[t(i,{type:"Plus",onClick:l[11]||(l[11]=a=>e.confire())},{default:o(()=>[u("取消")]),_:1}),t(i,{type:"success",onClick:l[12]||(l[12]=a=>e.isEdit?e.editConfirm():e.confirm())},{default:o(()=>[u("确认")]),_:1})])]),default:o(()=>[t(P,{ref:"dialogForm",model:e.itemData,rules:e.rules},{default:o(()=>[t(n,{"label-width":100,label:"城市"},{default:o(()=>[d("div",ae,[t(S,{modelValue:e.value,"onUpdate:modelValue":l[5]||(l[5]=a=>e.value=a),options:e.options,onChange:e.handleChange,clearable:""},null,8,["modelValue","options","onChange"])])]),_:1}),t(n,{label:"详细地址","label-width":100,prop:"detailAddress"},{default:o(()=>[t(m,{modelValue:e.itemData.detailAddress,"onUpdate:modelValue":l[6]||(l[6]=a=>e.itemData.detailAddress=a),modelModifiers:{number:!0},autocomplete:"off",type:"text"},null,8,["modelValue"])]),_:1}),t(n,{label:"收货人","label-width":100,prop:"name"},{default:o(()=>[t(m,{modelValue:e.itemData.name,"onUpdate:modelValue":l[7]||(l[7]=a=>e.itemData.name=a),modelModifiers:{number:!0},autocomplete:"off",type:"text"},null,8,["modelValue"])]),_:1}),t(n,{label:"手机号","label-width":100,prop:"type"},{default:o(()=>[t(m,{modelValue:e.itemData.phoneNumber,"onUpdate:modelValue":l[8]||(l[8]=a=>e.itemData.phoneNumber=a),modelModifiers:{number:!0},autocomplete:"off",type:"text"},null,8,["modelValue"])]),_:1}),t(n,{label:"memberId","label-width":100,prop:"type"},{default:o(()=>[t(m,{modelValue:e.itemData.memberId,"onUpdate:modelValue":l[9]||(l[9]=a=>e.itemData.memberId=a),modelModifiers:{number:!0},autocomplete:"off",type:"text"},null,8,["modelValue"])]),_:1}),t(n,{label:"是否默认","label-width":100,prop:"type"},{default:o(()=>[t(_,{modelValue:e.value1,"onUpdate:modelValue":l[10]||(l[10]=a=>e.value1=a)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])):T("",!0)])}const qe=$(ee,[["render",se]]);export{qe as default};
