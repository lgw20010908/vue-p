import{aj as V,a as E,o as p,I as w,q as a,n as o,m as C,M as c,Q as u,ak as r,al as z}from"./index-e913ff2d.js";import{E as k}from"./el-overlay-a4518769.js";import{a as _,b as S,E as $}from"./el-input-cb7f48d8.js";import{E as M}from"./el-card-a0a79345.js";import{E as P}from"./el-select-3f5c59ab.js";import"./el-tag-185b0755.js";import{E as T,a as B}from"./el-table-column-293e55d3.js";import{E as q}from"./el-button-dfd295e9.js";import{a as v,s as U,e as F,d as N}from"./umsMemberTask-b4a71873.js";/* empty css                   */import{E as I}from"./el-message-box-871e55a1.js";import{E as l}from"./index-c657a219.js";import"./refs-0f2c73b3.js";import"./scroll-2f74979b.js";import"./_initCloneObject-e19fe7d2.js";import"./index-68f3b845.js";import"./debounce-35ee1cfa.js";import"./validator-c4ae5d88.js";const j=E({data(){return{requestData:{current:1,size:10},resuleData:{},dialogVisible:!1,itemData:{},isEdit:!1,rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},userStatus:!1}},methods:{changStatus(e){this.userStatus=e,this.itemData.status=this.userStatus?1:0},findPage(){v(this.requestData).then(e=>{this.resuleData=e.data.page})},handleSizeChange(e){this.requestData.size=e,this.findPage()},handleCurrentChange(e){this.requestData.current=e,this.findPage()},showDialog(){this.isEdit=!1,this.itemData={},this.dialogVisible=!0},confirm(){this.$refs.dialogForm.validate(e=>{if(e)this.itemData.createTime=new Date,U(this.itemData).then(t=>{t.code===1?(this.dialogVisible=!1,l({message:"新增成功",type:"success"}),this.findPage()):l({message:"新增失败",type:"error"})});else return!1})},confire(){this.dialogVisible=!1,this.itemData={}},showEdit(e){this.isEdit=!0,this.userStatus=e.status!=0,this.itemData={id:e.id,growth:e.growth,intergration:e.intergration,name:e.name,type:e.type},console.log(this.itemData),this.dialogVisible=!0},editConfirm(){this.$refs.dialogForm.validate(e=>{if(e)F(this.itemData).then(t=>{t.code===1?(this.dialogVisible=!1,l({message:"修改成功",type:"success"}),this.findPage()):l({message:"修改失败",type:"error"})});else return!1})},del(e){console.log(e),I.confirm("是否删除该记录?","删除数据",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{N({id:e.id}).then(t=>{t.code===1?(l({type:"success",message:"删除成功"}),this.findPage()):l({type:"error",message:"删除失败"})})}).catch(()=>{l({type:"info",message:"取消删除"})})}},mounted(){this.findPage()}}),Q={class:"dialog-footer"};function A(e,t,G,H,J,K){const s=T,n=q,g=B,f=P,h=M,d=_,m=S,b=$,D=k;return p(),w("div",null,[a(h,null,{default:o(()=>[u("div",null,[a(g,{data:e.resuleData.records,stripe:"",style:{width:"100%",height:"630px"},"row-style":{height:"60px"},border:""},{default:o(()=>[a(s,{prop:"id",label:"编号",width:"250",align:"center"},{default:o(i=>[r(z((e.resuleData.current-1)*e.resuleData.size+i.$index+1),1)]),_:1}),a(s,{prop:"growth",label:"赠送成长值(exp)",width:"250",align:"center"}),a(s,{prop:"intergration",label:"赠送积分(分)",width:"250",align:"center"}),a(s,{prop:"name",label:"名称",width:"250",align:"center"}),a(s,{prop:"type",label:"任务类型",align:"center"}),a(s,{label:"功能管理",fixed:"right"},{default:o(i=>[a(n,{size:"small",onClick:y=>e.showEdit(i.row)},{default:o(()=>[r("编辑")]),_:2},1032,["onClick"]),a(n,{size:"small",type:"danger",onClick:y=>e.del(i.row)},{default:o(()=>[r("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),u("div",null,[a(f,{"current-page":e.resuleData.current,"onUpdate:currentPage":t[0]||(t[0]=i=>e.resuleData.current=i),"page-size":e.resuleData.size,"onUpdate:pageSize":t[1]||(t[1]=i=>e.resuleData.size=i),"page-sizes":[10,20,30,40],layout:"total, prev, pager, next, jumper, sizes",total:e.resuleData.total,onSizeChange:e.handleSizeChange,onCurrentChange:e.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])]),_:1}),e.dialogVisible?(p(),C(D,{key:0,modelValue:e.dialogVisible,"onUpdate:modelValue":t[8]||(t[8]=i=>e.dialogVisible=i),title:e.isEdit?"修改数据":"新增数据",width:"600px"},{footer:o(()=>[u("span",Q,[a(n,{type:"Plus",onClick:t[6]||(t[6]=i=>e.confire())},{default:o(()=>[r("取消")]),_:1}),a(n,{type:"success",onClick:t[7]||(t[7]=i=>e.isEdit?e.editConfirm():e.confirm())},{default:o(()=>[r("确认")]),_:1})])]),default:o(()=>[a(b,{ref:"dialogForm",model:e.itemData,rules:e.rules},{default:o(()=>[a(m,{label:"成长值","label-width":100,prop:"growth"},{default:o(()=>[a(d,{modelValue:e.itemData.growth,"onUpdate:modelValue":t[2]||(t[2]=i=>e.itemData.growth=i),modelModifiers:{number:!0},autocomplete:"off",type:"text"},null,8,["modelValue"])]),_:1}),a(m,{label:"积分","label-width":100,prop:"intergration"},{default:o(()=>[a(d,{modelValue:e.itemData.intergration,"onUpdate:modelValue":t[3]||(t[3]=i=>e.itemData.intergration=i),modelModifiers:{number:!0},autocomplete:"off",type:"text"},null,8,["modelValue"])]),_:1}),a(m,{label:"名称","label-width":100,prop:"name"},{default:o(()=>[a(d,{modelValue:e.itemData.name,"onUpdate:modelValue":t[4]||(t[4]=i=>e.itemData.name=i),modelModifiers:{number:!0},autocomplete:"off",type:"text"},null,8,["modelValue"])]),_:1}),a(m,{label:"任务类型","label-width":100,prop:"type"},{default:o(()=>[a(d,{modelValue:e.itemData.type,"onUpdate:modelValue":t[5]||(t[5]=i=>e.itemData.type=i),modelModifiers:{number:!0},autocomplete:"off",type:"text"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])):c("",!0)])}const me=V(j,[["render",A]]);export{me as default};
