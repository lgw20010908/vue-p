import{aj as M,r as s,o as G,I as N,q as e,n as l,Q as w,ak as i,al as j}from"./index-e913ff2d.js";import{E as q}from"./el-overlay-a4518769.js";import{a as L,b as O,E as Q}from"./el-input-cb7f48d8.js";import{E as R}from"./el-switch-39528eb4.js";import{E as A}from"./el-date-picker-77ba24fa.js";import"./el-tag-185b0755.js";import{E as H}from"./el-button-dfd295e9.js";import{E as J}from"./el-select-3f5c59ab.js";import{a as K,E as W}from"./el-table-column-293e55d3.js";import{E as X}from"./el-row-3c5e13f8.js";import{E as Z}from"./index-68f3b845.js";import"./refs-0f2c73b3.js";import"./scroll-2f74979b.js";import"./_initCloneObject-e19fe7d2.js";import"./validator-c4ae5d88.js";import"./index-94d47643.js";import"./debounce-35ee1cfa.js";const ee={class:"goodslist"},te={class:"pagination"},ae={class:"dialog-footer"},le={__name:"sms-flash-promotion",setup(oe){const u=s(!1),p=s(1),b=s(0),v=s(1),f=s(10),g=s(""),c=s(),d=async()=>{let{data:n}=await api.getList({current:v.value,size:f.value});c.value=n.page.records,b.value=n.page.total};d();const o=s({title:"",startDate:"",endDate:"",status:!0}),C=async()=>{if(!p.value){o.value.status=o.value.status?1:0,await api.editGoods(o.value),d(),u.value=!1;return}o.value.status=o.value.status?1:0,await api.addGoods(o.value),d(),u.value=!1},x=(n,t)=>{u.value=!0,p.value=0,t.status=t.status==1,o.value={...t}},D=()=>{u.value=!0,p.value=1},k=async(n,t)=>{await api.delGoods({id:t.id}),d()},h=()=>{o.value={id:"",title:"",start_date:"",end_date:"",status:!0,create_time:""}},z=()=>{c.value=c.value.filter(n=>n.title.includes(g.value))},U=n=>{d()},Y=n=>{d()};return(n,t)=>{const y=L,m=H,E=X,r=W,S=Z,F=K,P=J,_=O,V=A,T=R,$=Q,B=q;return G(),N("div",ee,[e(E,{style:{"margin-bottom":"10px"}},{default:l(()=>[e(y,{style:{width:"150px","margin-right":"10px"},modelValue:g.value,"onUpdate:modelValue":t[0]||(t[0]=a=>g.value=a),autocomplete:"off"},null,8,["modelValue"]),e(m,{type:"primary",onClick:z},{default:l(()=>[i("查询")]),_:1})]),_:1}),e(E,{style:{"margin-bottom":"5px"}},{default:l(()=>[e(m,{type:"primary",onClick:D},{default:l(()=>[i("新增商品")]),_:1})]),_:1}),e(F,{border:"",data:c.value,style:{width:"100%"}},{default:l(()=>[e(r,{align:"center",prop:"id",label:"编号",width:"80"}),e(r,{align:"center",prop:"title",label:"秒杀时间段名称",width:"180"}),e(r,{align:"center",prop:"startDate",label:"开始日期",width:"180"}),e(r,{align:"center",prop:"endDate",label:"结束日期"}),e(r,{align:"center",label:"上下线状态"},{default:l(a=>[e(S,null,{default:l(()=>[i(j(a.row.status?"已上线":"已下线"),1)]),_:2},1024)]),_:1}),e(r,{align:"center",prop:"createTime",label:"创建时间"}),e(r,{align:"center",label:"操作"},{default:l(a=>[e(m,{type:"primary",size:"small",onClick:I=>x(a.$index,a.row)},{default:l(()=>[i("编辑")]),_:2},1032,["onClick"]),e(m,{size:"small",type:"danger",onClick:I=>k(a.$index,a.row)},{default:l(()=>[i("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),w("div",te,[e(P,{style:{"margin-top":"10px"},"current-page":v.value,"onUpdate:currentPage":t[1]||(t[1]=a=>v.value=a),"page-size":f.value,"onUpdate:pageSize":t[2]||(t[2]=a=>f.value=a),"page-sizes":[10,20,50,100],small:"small",background:"",layout:"total, sizes, prev, pager, next, jumper",total:b.value,onSizeChange:U,onCurrentChange:Y},null,8,["current-page","page-size","total"])]),e(B,{modelValue:u.value,"onUpdate:modelValue":t[8]||(t[8]=a=>u.value=a),title:p.value==0?"编辑":"新增",onClosed:h},{footer:l(()=>[w("span",ae,[e(m,{onClick:t[7]||(t[7]=a=>u.value=!1)},{default:l(()=>[i("取消")]),_:1}),e(m,{type:"primary",onClick:C},{default:l(()=>[i(" 保存 ")]),_:1})])]),default:l(()=>[e($,{"label-width":"180px",model:o.value},{default:l(()=>[e(_,{label:"秒杀时间段名称"},{default:l(()=>[e(y,{modelValue:o.value.title,"onUpdate:modelValue":t[3]||(t[3]=a=>o.value.title=a),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(_,{label:"开始日期"},{default:l(()=>[e(V,{modelValue:o.value.startDate,"onUpdate:modelValue":t[4]||(t[4]=a=>o.value.startDate=a),type:"date","value-format":"YYYY-MM-DD",placeholder:"请选择日期"},null,8,["modelValue"])]),_:1}),e(_,{label:"结束日期"},{default:l(()=>[e(V,{modelValue:o.value.endDate,"onUpdate:modelValue":t[5]||(t[5]=a=>o.value.endDate=a),type:"date","value-format":"YYYY-MM-DD",placeholder:"请选择日期"},null,8,["modelValue"])]),_:1}),e(_,{label:"上下线状态"},{default:l(()=>[e(T,{modelValue:o.value.status,"onUpdate:modelValue":t[6]||(t[6]=a=>o.value.status=a),class:"ml-2",style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},we=M(le,[["__scopeId","data-v-028bcc8a"]]);export{we as default};
