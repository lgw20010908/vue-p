import{as as p,aj as w,a as y,o as f,I as E,q as l,aM as C,Q as u,n as o,m as z,M as k,ak as d,al as M}from"./index-e913ff2d.js";import{E as T}from"./el-overlay-a4518769.js";import{a as $,b as P,E as c}from"./el-input-cb7f48d8.js";import{E as U}from"./el-select-3f5c59ab.js";import"./el-tag-185b0755.js";import{a as q,E as v}from"./el-table-column-293e55d3.js";import{E as S}from"./el-button-dfd295e9.js";/* empty css                   */import{E as B}from"./el-message-box-871e55a1.js";import{E as n}from"./index-c657a219.js";import"./refs-0f2c73b3.js";import"./scroll-2f74979b.js";import"./_initCloneObject-e19fe7d2.js";import"./index-68f3b845.js";import"./debounce-35ee1cfa.js";import"./validator-c4ae5d88.js";const I=e=>p.request({url:"mall/ums-menu/page",method:"post",data:e}),F=e=>p.request({url:"/mall/ums-menu/add",method:"POST",data:e}),N=e=>p.request({url:"mall/ums-menu/del/"+e.id,method:"GET"}),K=e=>p.request({url:"mall/ums-menu/edit",method:"post",data:e}),j=y({data(){return{requestData:{current:1,size:5},resuleData:{},dialogVisible:!1,itemData:{},isEdit:!1,rules:{}}},methods:{findPage(){I(this.requestData).then(e=>{this.resuleData=e.data.page,console.log(this.resuleData)})},handleSizeChange(e){this.requestData.size=e,this.findPage()},handleCurrentChange(e){this.requestData.current=e,this.findPage()},showDialog(){this.isEdit=!1,this.itemData={},this.dialogVisible=!0},confirm(){this.$refs.dialogForm.validate(e=>{if(e)this.itemData.create_time=new Date,F(this.itemData).then(t=>{t.code===1?(this.dialogVisible=!1,n({message:"新增成功",type:"success"}),this.findPage()):n({message:"新增失败",type:"error"})});else return!1})},confire(){this.dialogVisible=!1,this.itemData={}},showumsMenuEdit(e){this.isumsMenuEdit=!0,this.itemData={id:e.id,parent_id:e.parent_id,createTime:e.createTime,title:e.title,sort:e.sort,name:e.name,icon:e.icon,hidden:e.hidden},this.dialogVisible=!0},EditConfirm(){this.$refs.dialogForm.validate(e=>{if(e)K(this.itemData).then(t=>{t.code===1?(this.dialogVisible=!1,n({message:"修改成功",type:"success"}),this.findPage()):n({message:"修改失败",type:"error"})});else return!1})},umsMenuDelId(e){console.log(e),B.confirm("是否删除该记录?","删除数据",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{N({id:e.id}).then(t=>{t.code===1?(n({type:"success",message:"删除成功"}),this.findPage()):n({type:"error",message:"删除失败"})})}).catch(()=>{n({type:"info",message:"取消删除"})})}},mounted(){this.findPage()}}),G={class:"dialog-footer"};function O(e,t,Q,A,H,J){const s=$,m=S,i=v,h=q,g=U,r=P,D=c,b=T;return f(),E("div",null,[l(s,{modelValue:e.searchText,"onUpdate:modelValue":t[0]||(t[0]=a=>e.searchText=a),placeholder:"请输入搜索关键字",clearable:"",onClear:e.clearSearch,onKeyup:C(e.performSearch,["enter"]),style:{"margin-bottom":"20px"}},null,8,["modelValue","onClear","onKeyup"]),u("div",null,[l(m,{type:"primary",onClick:t[1]||(t[1]=a=>e.showDialog())},{default:o(()=>[d("新增")]),_:1})]),u("div",null,[l(h,{data:e.resuleData.records,style:{width:"100%"}},{default:o(()=>[l(i,{label:"id",width:"100"},{default:o(a=>[d(M((e.resuleData.current-1)*e.resuleData.size+a.$index+1),1)]),_:1}),l(i,{prop:"parentId",label:"父级ID",width:"100"}),l(i,{prop:"createTime",label:"创建时间",width:"120"}),l(i,{prop:"title",label:"菜单名称",width:"120"}),l(i,{prop:"level",label:"菜单级数",width:"120"}),l(i,{prop:"sort",label:"菜单排序",width:"120"}),l(i,{prop:"name",label:"前端名称",width:"120"}),l(i,{prop:"icon",label:"前端图标",width:"120"}),l(i,{prop:"hidden",label:"前端隐藏",width:"120"}),l(i,{label:"操作"},{default:o(a=>[l(m,{size:"small",onClick:V=>e.showumsMenuEdit(a.row)},{default:o(()=>[d("编辑")]),_:2},1032,["onClick"]),l(m,{size:"small",type:"danger",onClick:V=>e.umsMenuDelId(a.row)},{default:o(()=>[d("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),u("div",null,[l(g,{"current-page":e.resuleData.current,"onUpdate:currentPage":t[2]||(t[2]=a=>e.resuleData.current=a),"page-size":e.resuleData.size,"onUpdate:pageSize":t[3]||(t[3]=a=>e.resuleData.size=a),"page-sizes":[5,10,15,20],layout:"total, sizes, prev, pager, next, jumper",total:e.resuleData.total,onSizeChange:e.handleSizeChange,onCurrentChange:e.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])]),e.dialogVisible?(f(),z(b,{key:0,modelValue:e.dialogVisible,"onUpdate:modelValue":t[12]||(t[12]=a=>e.dialogVisible=a),title:e.isEdit?"修改数据":"新增数据",width:"400px"},{footer:o(()=>[u("span",G,[l(m,{type:"primary",onClick:t[10]||(t[10]=a=>e.confire())},{default:o(()=>[d("取消")]),_:1}),l(m,{type:"primary",onClick:t[11]||(t[11]=a=>e.isEdit?e.EditConfirm():e.confirm())},{default:o(()=>[d("确认")]),_:1})])]),default:o(()=>[l(D,{ref:"dialogForm",model:e.itemData,rules:e.rules},{default:o(()=>[l(r,{label:"菜单名称","label-width":"100",prop:"title"},{default:o(()=>[l(s,{modelValue:e.itemData.title,"onUpdate:modelValue":t[4]||(t[4]=a=>e.itemData.title=a),autocomplete:"off",style:{width:"200px"}},null,8,["modelValue"])]),_:1}),l(r,{label:"菜单级数","label-width":"100",prop:"level"},{default:o(()=>[l(s,{modelValue:e.itemData.level,"onUpdate:modelValue":t[5]||(t[5]=a=>e.itemData.level=a),autocomplete:"off",style:{width:"200px"}},null,8,["modelValue"])]),_:1}),l(r,{label:"菜单分类","label-width":"100",prop:"sort"},{default:o(()=>[l(s,{modelValue:e.itemData.sort,"onUpdate:modelValue":t[6]||(t[6]=a=>e.itemData.sort=a),autocomplete:"off",style:{width:"200px"}},null,8,["modelValue"])]),_:1}),l(r,{label:"前端名称","label-width":"100",prop:"name"},{default:o(()=>[l(s,{modelValue:e.itemData.name,"onUpdate:modelValue":t[7]||(t[7]=a=>e.itemData.name=a),autocomplete:"off",style:{width:"200px"}},null,8,["modelValue"])]),_:1}),l(r,{label:"前端图标","label-width":"100",prop:"icon"},{default:o(()=>[l(s,{modelValue:e.itemData.icon,"onUpdate:modelValue":t[8]||(t[8]=a=>e.itemData.icon=a),autocomplete:"off",style:{width:"200px"}},null,8,["modelValue"])]),_:1}),l(r,{label:"前端隐藏","label-width":"100",prop:"hidden"},{default:o(()=>[l(s,{modelValue:e.itemData.hidden,"onUpdate:modelValue":t[9]||(t[9]=a=>e.itemData.hidden=a),autocomplete:"off",style:{width:"200px"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])):k("",!0)])}const re=w(j,[["render",O]]);export{re as default};
