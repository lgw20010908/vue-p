import{as as g,aj as G,r as d,o as O,I as Q,q as e,n as o,Q as k,ak as m,al as T}from"./index-e913ff2d.js";import{E as R}from"./el-overlay-a4518769.js";import{a as H,b as J,E as K}from"./el-input-cb7f48d8.js";import{E as L}from"./el-switch-39528eb4.js";import{E as W}from"./el-date-picker-77ba24fa.js";import"./el-tag-185b0755.js";import{E as X}from"./el-button-dfd295e9.js";import{E as Z}from"./el-select-3f5c59ab.js";import{a as ee,E as le}from"./el-table-column-293e55d3.js";import{E as ae}from"./el-image-viewer-8836c340.js";import{E as te}from"./el-row-3c5e13f8.js";import{E as oe}from"./index-68f3b845.js";import"./refs-0f2c73b3.js";import"./scroll-2f74979b.js";import"./_initCloneObject-e19fe7d2.js";import"./validator-c4ae5d88.js";import"./index-94d47643.js";import"./debounce-35ee1cfa.js";const b={getData:s=>g.post("/mall/sms-home-advertise/page",s),addAdv:s=>g.post("/mall/sms-home-advertise/add",s),delAdv:s=>g.request({url:"/mall/sms-home-advertise/del/"+s.id,method:"GET",headers:{"Content-Type":"application/x-www-form-urlencoded"}}),editAdv:s=>g.post("/mall/sms-home-advertise/edit",s)};const ne={class:"home-adv"},ue={class:"pagination"},se={class:"dialog-footer"},re={__name:"homeAdvertise",setup(s){const f=d(1),i=d(!1),V=d(""),_=d([]),w=d(0),y=d(1),E=d(10),t=d({}),p=async()=>{let{data:u}=await b.getData({current:y.value,size:E.value});_.value=u.page.records,w.value=u.page.total};p();const U=()=>{_.value=_.value.filter(u=>u.name.includes(V.value))},z=()=>{i.value=!0,f.value=1},D=async(u,a)=>{await b.delAdv({id:a.id}),p()},h=(u,a)=>{i.value=!0,f.value=0,a.status=a.status==1,t.value={...a}},A=async()=>{if(!f.value){t.value.status=t.value.status?1:0,await b.editAdv(t.value),p(),i.value=!1;return}t.value.status=t.value.status?1:0,await b.addAdv(t.value),p(),i.value=!1},Y=()=>{t.value={}},S=u=>{p()},I=u=>{p()};return(u,a)=>{const v=H,c=X,C=te,n=le,$=ae,B=oe,F=ee,M=Z,r=J,x=W,q=L,N=K,P=R;return O(),Q("div",ne,[e(C,{style:{"margin-bottom":"10px"}},{default:o(()=>[e(v,{style:{width:"150px","margin-right":"10px"},modelValue:V.value,"onUpdate:modelValue":a[0]||(a[0]=l=>V.value=l),autocomplete:"off"},null,8,["modelValue"]),e(c,{type:"primary",onClick:U},{default:o(()=>[m("查询")]),_:1})]),_:1}),e(C,{style:{"margin-bottom":"5px"}},{default:o(()=>[e(c,{type:"primary",onClick:z},{default:o(()=>[m("新增广告")]),_:1})]),_:1}),e(F,{border:"",data:_.value,style:{width:"100%"}},{default:o(()=>[e(n,{align:"center",prop:"id",label:"编号",width:"80"}),e(n,{align:"center",prop:"name",label:"广告名称"}),e(n,{align:"center",label:"封面图"},{default:o(l=>[e($,{src:l.row.pic},null,8,["src"])]),_:1}),e(n,{align:"center",prop:"startTime",label:"开始时间"}),e(n,{align:"center",prop:"endTime",label:"结束时间"}),e(n,{align:"center",prop:"clickCount",label:"点击数"}),e(n,{align:"center",prop:"orderCount",label:"下单数"}),e(n,{align:"center",prop:"note",label:"备注"}),e(n,{align:"center",prop:"sort",label:"排序"}),e(n,{align:"center",prop:"url",label:"链接地址"}),e(n,{align:"center",label:"状态"},{default:o(l=>[e(B,null,{default:o(()=>[m(T(l.row.status==1?"已上线":"已下线"),1)]),_:2},1024)]),_:1}),e(n,{align:"center",prop:"type",label:"轮播位置"},{default:o(l=>[m(T(l.row.type==1?"首页轮播":"app轮播"),1)]),_:1}),e(n,{align:"center",label:"操作"},{default:o(l=>[e(c,{type:"primary",size:"small",onClick:j=>h(l.$index,l.row)},{default:o(()=>[m("编辑")]),_:2},1032,["onClick"]),e(c,{size:"small",type:"danger",onClick:j=>D(l.$index,l.row)},{default:o(()=>[m("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),k("div",ue,[e(M,{style:{"margin-top":"10px"},"current-page":y.value,"onUpdate:currentPage":a[1]||(a[1]=l=>y.value=l),"page-size":E.value,"onUpdate:pageSize":a[2]||(a[2]=l=>E.value=l),"page-sizes":[10,20,50,100],small:"small",background:"",layout:"total, sizes, prev, pager, next, jumper",total:w.value,onSizeChange:S,onCurrentChange:I},null,8,["current-page","page-size","total"])]),e(P,{modelValue:i.value,"onUpdate:modelValue":a[12]||(a[12]=l=>i.value=l),title:f.value==0?"编辑":"新增",onClosed:Y},{footer:o(()=>[k("span",se,[e(c,{onClick:a[11]||(a[11]=l=>i.value=!1)},{default:o(()=>[m("取消")]),_:1}),e(c,{type:"primary",onClick:A},{default:o(()=>[m(" 保存 ")]),_:1})])]),default:o(()=>[e(N,{"label-width":"180px",model:t.value},{default:o(()=>[e(r,{label:"广告名称"},{default:o(()=>[e(v,{modelValue:t.value.name,"onUpdate:modelValue":a[3]||(a[3]=l=>t.value.name=l),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(r,{label:"封面图地址"},{default:o(()=>[e(v,{modelValue:t.value.pic,"onUpdate:modelValue":a[4]||(a[4]=l=>t.value.pic=l),type:"file",autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(r,{label:"备注"},{default:o(()=>[e(v,{modelValue:t.value.note,"onUpdate:modelValue":a[5]||(a[5]=l=>t.value.note=l),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(r,{label:"排序"},{default:o(()=>[e(v,{modelValue:t.value.sort,"onUpdate:modelValue":a[6]||(a[6]=l=>t.value.sort=l),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(r,{label:"链接地址"},{default:o(()=>[e(v,{modelValue:t.value.url,"onUpdate:modelValue":a[7]||(a[7]=l=>t.value.url=l),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(r,{label:"开始日期"},{default:o(()=>[e(x,{modelValue:t.value.startTime,"onUpdate:modelValue":a[8]||(a[8]=l=>t.value.startTime=l),type:"date","value-format":"YYYY-MM-DD",placeholder:"请选择日期"},null,8,["modelValue"])]),_:1}),e(r,{label:"结束日期"},{default:o(()=>[e(x,{modelValue:t.value.endTime,"onUpdate:modelValue":a[9]||(a[9]=l=>t.value.endTime=l),type:"date","value-format":"YYYY-MM-DD",placeholder:"请选择日期"},null,8,["modelValue"])]),_:1}),e(r,{label:"上下线状态"},{default:o(()=>[e(q,{modelValue:t.value.status,"onUpdate:modelValue":a[10]||(a[10]=l=>t.value.status=l),class:"ml-2",style:{"--el-switch-on-color":"#13ce66","--el-switch-off-color":"#ff4949"}},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},Ue=G(re,[["__scopeId","data-v-02a2104d"]]);export{Ue as default};
