import{aj as S,a as $,l as m,o as h,I as v,q as t,n as o,m as B,M,Q as u,ak as l,al as T,B as U}from"./index-e913ff2d.js";import{E as q}from"./el-overlay-a4518769.js";import{a as F,b as I,E as N}from"./el-input-cb7f48d8.js";/* empty css                       *//* empty css                 */import{E as R}from"./el-card-a0a79345.js";import{E as j}from"./el-select-3f5c59ab.js";import"./el-tag-185b0755.js";import{E as G,a as O}from"./el-table-column-293e55d3.js";import{E as Q}from"./el-button-dfd295e9.js";import{g as A,a as H,s as J,e as K,d as L}from"./umsMemberTask-b4a71873.js";/* empty css                   */import{E as W}from"./el-message-box-871e55a1.js";import{E as r}from"./index-c657a219.js";import{E as X,a as Y}from"./index-099dd56a.js";import"./refs-0f2c73b3.js";import"./scroll-2f74979b.js";import"./_initCloneObject-e19fe7d2.js";import"./index-68f3b845.js";import"./debounce-35ee1cfa.js";import"./validator-c4ae5d88.js";const Z=$({data(){return{input:"",showData:[],radio:3,requestData:{current:1,size:10},resuleData:{},dialogVisible:!1,itemData:{},isEdit:!1,rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},userStatus:!1}},methods:{update(){this.findPage(),this.input=""},search(){A({id:this.input}).then(e=>{console.log(e),this.showData=[],this.showData[0]=e.data.help})},changStatus(e){this.userStatus=e,this.itemData.status=this.userStatus?1:0},findPage(){H(this.requestData).then(e=>{this.resuleData=e.data.page,this.showData=this.resuleData.records})},handleSizeChange(e){this.requestData.size=e,this.findPage()},handleCurrentChange(e){this.requestData.current=e,this.findPage()},showDialog(){this.isEdit=!1,this.itemData={},this.dialogVisible=!0,this.radio=0},confirm(){this.itemData.type=this.radio,this.$refs.dialogForm.validate(e=>{if(e)this.itemData.createTime=new Date,J(this.itemData).then(a=>{a.code===1?(this.dialogVisible=!1,r({message:"新增成功",type:"success"}),this.findPage()):r({message:"新增失败",type:"error"})});else return!1})},confire(){this.dialogVisible=!1,this.itemData={},this.radio=0},showEdit(e){this.isEdit=!0,this.userStatus=e.status!=0,this.itemData={id:e.id,growth:e.growth,intergration:e.intergration,name:e.name,type:e.type},e.type==0?this.radio=0:this.radio=1,console.log(this.itemData),this.dialogVisible=!0},editConfirm(){this.$refs.dialogForm.validate(e=>{if(e)K(this.itemData).then(a=>{a.code===1?(this.dialogVisible=!1,r({message:"修改成功",type:"success"}),this.findPage()):r({message:"修改失败",type:"error"})});else return!1})},del(e){console.log(e),W.confirm("是否删除该记录?","删除数据",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{L({id:e.id}).then(a=>{a.code===1?(r({type:"success",message:"删除成功"}),this.findPage()):r({type:"error",message:"删除失败"})})}).catch(()=>{r({type:"info",message:"取消删除"})})}},mounted(){this.findPage()}}),x={class:"rig"},ee=u("div",{class:"title"},"用户任务管理",-1),te={style:{"margin-top":"10px"}},ae={class:"dialog-footer"};function oe(e,a,ie,le,se,ne){const p=F,c=m("Search"),d=U,s=Q,b=m("Plus"),D=m("Refresh"),n=G,_=m("EditPen"),y=m("Delete"),w=O,E=j,V=R,g=I,f=X,C=Y,k=N,z=q;return h(),v("div",null,[t(V,null,{default:o(()=>[u("div",x,[ee,t(p,{modelValue:e.input,"onUpdate:modelValue":a[0]||(a[0]=i=>e.input=i),class:"w-50 m-2",style:{width:"200px","margin-bottom":"10px"},placeholder:"请输入id","suffix-icon":e.Search},null,8,["modelValue","suffix-icon"]),t(s,{icon:e.Search,circle:"",style:{"margin-bottom":"10px","margin-left":"5px"},onClick:e.search},{default:o(()=>[t(d,null,{default:o(()=>[t(c)]),_:1})]),_:1},8,["icon","onClick"]),t(s,{type:"primary",style:{"margin-left":"50px","margin-bottom":"10px"},onClick:a[1]||(a[1]=i=>e.showDialog())},{default:o(()=>[t(d,null,{default:o(()=>[t(b)]),_:1}),l("添加信息")]),_:1}),t(s,{type:"success",style:{"margin-left":"40px","margin-bottom":"10px"},onClick:a[2]||(a[2]=i=>e.update())},{default:o(()=>[t(d,null,{default:o(()=>[t(D)]),_:1})]),_:1})]),u("div",null,[t(w,{data:e.showData,stripe:"",style:{width:"100%",height:"580px"},"row-style":{height:"60px"},border:""},{default:o(()=>[t(n,{prop:"id",label:"编号",width:"250",align:"center"},{default:o(i=>[l(T((e.resuleData.current-1)*e.resuleData.size+i.$index+1),1)]),_:1}),t(n,{prop:"id",label:"id",align:"center"}),t(n,{prop:"growth",label:"赠送成长值(exp)",align:"center"}),t(n,{prop:"intergration",label:"赠送积分(分)",align:"center"}),t(n,{prop:"name",label:"名称",width:"250",align:"center"}),t(n,{prop:"type",label:"任务类型0->新手任务；1->日常任务",align:"center"}),t(n,{label:"功能管理",fixed:"right",width:"180",align:"center"},{default:o(i=>[t(s,{size:"small",onClick:P=>e.showEdit(i.row)},{default:o(()=>[t(d,null,{default:o(()=>[t(_)]),_:1}),l("编辑")]),_:2},1032,["onClick"]),t(s,{size:"small",type:"danger",onClick:P=>e.del(i.row)},{default:o(()=>[t(d,null,{default:o(()=>[t(y)]),_:1}),l("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),u("div",te,[t(E,{"current-page":e.resuleData.current,"onUpdate:currentPage":a[3]||(a[3]=i=>e.resuleData.current=i),"page-size":e.resuleData.size,"onUpdate:pageSize":a[4]||(a[4]=i=>e.resuleData.size=i),"page-sizes":[10,20,30,40],layout:"total, prev, pager, next, jumper, sizes",total:e.resuleData.total,onSizeChange:e.handleSizeChange,onCurrentChange:e.handleCurrentChange},null,8,["current-page","page-size","total","onSizeChange","onCurrentChange"])])]),_:1}),e.dialogVisible?(h(),B(z,{key:0,modelValue:e.dialogVisible,"onUpdate:modelValue":a[11]||(a[11]=i=>e.dialogVisible=i),title:e.isEdit?"修改数据":"新增数据",width:"600px"},{footer:o(()=>[u("span",ae,[t(s,{type:"Plus",onClick:a[9]||(a[9]=i=>e.confire())},{default:o(()=>[l("取消")]),_:1}),t(s,{type:"success",onClick:a[10]||(a[10]=i=>e.isEdit?e.editConfirm():e.confirm())},{default:o(()=>[l("确认")]),_:1})])]),default:o(()=>[t(k,{ref:"dialogForm",model:e.itemData,rules:e.rules},{default:o(()=>[t(g,{label:"成长值","label-width":100,prop:"growth"},{default:o(()=>[t(p,{modelValue:e.itemData.growth,"onUpdate:modelValue":a[5]||(a[5]=i=>e.itemData.growth=i),modelModifiers:{number:!0},autocomplete:"off",type:"text"},null,8,["modelValue"])]),_:1}),t(g,{label:"积分","label-width":100,prop:"intergration"},{default:o(()=>[t(p,{modelValue:e.itemData.intergration,"onUpdate:modelValue":a[6]||(a[6]=i=>e.itemData.intergration=i),modelModifiers:{number:!0},autocomplete:"off",type:"text"},null,8,["modelValue"])]),_:1}),t(g,{label:"名称","label-width":100,prop:"name"},{default:o(()=>[t(p,{modelValue:e.itemData.name,"onUpdate:modelValue":a[7]||(a[7]=i=>e.itemData.name=i),modelModifiers:{number:!0},autocomplete:"off",type:"text"},null,8,["modelValue"])]),_:1}),t(g,{label:"任务类型","label-width":100,prop:"type"},{default:o(()=>[t(C,{modelValue:e.radio,"onUpdate:modelValue":a[8]||(a[8]=i=>e.radio=i)},{default:o(()=>[t(f,{label:0},{default:o(()=>[l("新手任务")]),_:1}),t(f,{label:1},{default:o(()=>[l("日常任务")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])):M("",!0)])}const $e=S(Z,[["render",oe]]);export{$e as default};
