import{as as c,aj as w,a as C,o as E,I as y,Q as u,q as o,n as a,T as _,ak as p}from"./index-4e66693d.js";import{E as k}from"./el-overlay-5d7acc48.js";import{a as F,b as v,E as P}from"./el-input-b637a84d.js";import{E as z}from"./el-select-dee45c9f.js";import"./el-tag-3aed28f9.js";import{a as B,E as $}from"./el-table-column-1b23615c.js";import{E as L}from"./el-button-bad787b3.js";import{E as T}from"./el-message-box-a940a289.js";import{c as U}from"./cloneDeep-4dfd5273.js";import{E as s}from"./index-11be697d.js";import"./refs-cbced2c2.js";import"./scroll-45713807.js";import"./_initCloneObject-b40d657f.js";import"./index-88ab3c4a.js";import"./debounce-562d200a.js";import"./validator-55a3f62c.js";const W=e=>c.request({url:"/mall/cms-help-category/page",method:"post",data:e}),q=e=>c.request({url:"/mall/cms-help-category/add",method:"post",data:e}),S=e=>c.request({url:"/mall/cms-help-category/del/"+e.id,method:"get"}),A=e=>c.request({url:"/mall/cms-help-category/edit",method:"post",data:e}),D=C({data(){return{cmHelps:[],page:{total:0,current:1,size:5},dialogFormVisible:!1,cmHelp:{helpCount:0,icon:"",id:0,name:"",showStatus:0,sort:0},formLabelWidth:80}},mounted(){this.getCmHelpsPage(1)},methods:{toEdit(e){console.log(e),this.dialogFormVisible=!0,this.cmHelp=U(e)},getCmHelpsPage(e){W({current:e,size:5}).then(n=>{console.log(n);const g=n.data.page;this.cmHelps=g.records,this.page=g}).catch(n=>{console.log(n)})},currentchange(e){this.getCmHelpsPage(e),this.page.current=e},del(e){console.log(e),T.confirm("是否删除该记录?","删除数据",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{S({id:e.id}).then(l=>{l.code===1?(s({type:"success",message:"删除成功"}),this.getCmHelpsPage(this.page.current)):s({type:"error",message:"删除失败"})})}).catch(()=>{s({type:"info",message:"取消删除"})})},toAdd(){this.cmHelp={helpCount:0,icon:"",id:0,name:"",showStatus:0,sort:0},this.dialogFormVisible=!0},save(){const e=this.cmHelp;e.id==0?q(e).then(l=>{if(l.success)this.dialogFormVisible=!1,this.getCmHelpsPage(this.page.current),s(l.msg);else return s(l.msg),!1}).catch(l=>{s("网络错误联系管理员"),console.log(l)}):A(e).then(l=>{if(l.success)this.dialogFormVisible=!1,this.getCmHelpsPage(this.page.current),s(l.msg);else return s(l.msg),!1}).catch(l=>{s("网络错误联系管理员")})}}}),I=u("div",{class:""},"帮助页面",-1),N=u("br",null,null,-1),M={class:"cmHelps"},j={class:"adcate-tools"},Q={class:"dialog-footer"};function G(e,l,n,g,J,K){const m=L,i=$,h=B,f=z,r=F,d=v,b=P,H=k;return E(),y(_,null,[I,N,u("div",M,[u("div",j,[o(m,{type:"warning",onClick:e.toAdd},{default:a(()=>[p("添加")]),_:1},8,["onClick"])]),o(h,{data:e.cmHelps,style:{width:"100%"}},{default:a(()=>[o(i,{fixed:"",prop:"id",label:"id",width:"50"}),o(i,{prop:"name",label:"帮助名称"}),o(i,{prop:"helpCount",label:"帮助数量",width:"120"}),o(i,{prop:"icon",label:"图标",width:"120"}),o(i,{prop:"showStatus",label:"显示状态",width:"120"}),o(i,{prop:"sort",label:"排序",width:"120"}),o(i,{fixed:"right",label:"操作",width:"120"},{default:a(t=>[o(m,{link:"",type:"primary",size:"small",onClick:V=>e.toEdit(t.row)},{default:a(()=>[p("更新")]),_:2},1032,["onClick"]),o(m,{link:"",type:"primary",size:"small",onClick:V=>e.del(t.row)},{default:a(()=>[p("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),o(f,{layout:"prev, pager, next","page-size":e.page.size,total:e.page.total,onCurrentChange:e.currentchange},null,8,["page-size","total","onCurrentChange"])]),o(H,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":l[6]||(l[6]=t=>e.dialogFormVisible=t),title:"编辑"},{footer:a(()=>[u("span",Q,[o(m,{onClick:l[5]||(l[5]=t=>e.dialogFormVisible=!1)},{default:a(()=>[p("取消")]),_:1}),o(m,{type:"primary",onClick:e.save},{default:a(()=>[p(" 保存 ")]),_:1},8,["onClick"])])]),default:a(()=>[o(b,{model:e.cmHelp},{default:a(()=>[o(d,{label:"帮助名称","label-width":e.formLabelWidth},{default:a(()=>[o(r,{modelValue:e.cmHelp.name,"onUpdate:modelValue":l[0]||(l[0]=t=>e.cmHelp.name=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(d,{label:"帮助数量","label-width":e.formLabelWidth},{default:a(()=>[o(r,{modelValue:e.cmHelp.helpCount,"onUpdate:modelValue":l[1]||(l[1]=t=>e.cmHelp.helpCount=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(d,{label:"图标","label-width":e.formLabelWidth},{default:a(()=>[o(r,{modelValue:e.cmHelp.icon,"onUpdate:modelValue":l[2]||(l[2]=t=>e.cmHelp.icon=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(d,{label:"显示状态","label-width":e.formLabelWidth},{default:a(()=>[o(r,{modelValue:e.cmHelp.showStatus,"onUpdate:modelValue":l[3]||(l[3]=t=>e.cmHelp.showStatus=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(d,{label:"排序","label-width":e.formLabelWidth},{default:a(()=>[o(r,{modelValue:e.cmHelp.sort,"onUpdate:modelValue":l[4]||(l[4]=t=>e.cmHelp.sort=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])],64)}const de=w(D,[["render",G]]);export{de as default};
