import{a3 as te,bE as de,H as fe,G as W,aO as me,$ as ve,D as x,bF as pe,aB as se,bG as _,w as K,bH as ye,bI as ge,bJ as be,bK as Ce,ay as V,b as J,d as j,a as Y,q as R,bL as X,j as C,at as he,ar as ke,F as Ee,c as Q,V as we,e as F,o as $,I as U,Q as H,L as k,u as o,al as Me,n as D,m as q,R as Be,B as Ie,M as G,W as ne,_ as le,bM as De,aG as Se,bN as Te,y as Z,r as S,bd as Le,z as Oe,N as $e,bO as Fe,bP as ee,ad as Ae,a8 as oe,p as Pe,ah as Ne,b0 as ze,K as Re,J as Ye,ai as He,b4 as Ve,bQ as Xe,X as Ue}from"./index-4e66693d.js";import{c as We}from"./refs-cbced2c2.js";import{U as ae}from"./el-button-bad787b3.js";import{g as Ke}from"./scroll-45713807.js";const je=(e,s,c)=>{let a={offsetX:0,offsetY:0};const r=n=>{const i=n.clientX,v=n.clientY,{offsetX:f,offsetY:p}=a,t=e.value.getBoundingClientRect(),m=t.left,E=t.top,A=t.width,P=t.height,N=document.documentElement.clientWidth,T=document.documentElement.clientHeight,z=-m+f,L=-E+p,w=N-m-A+f,M=T-E-P+p,O=h=>{const l=Math.min(Math.max(f+h.clientX-i,z),w),b=Math.min(Math.max(p+h.clientY-v,L),M);a={offsetX:l,offsetY:b},e.value.style.transform=`translate(${W(l)}, ${W(b)})`},y=()=>{document.removeEventListener("mousemove",O),document.removeEventListener("mouseup",y)};document.addEventListener("mousemove",O),document.addEventListener("mouseup",y)},d=()=>{s.value&&e.value&&s.value.addEventListener("mousedown",r)},u=()=>{s.value&&e.value&&s.value.removeEventListener("mousedown",r)};te(()=>{de(()=>{c.value?d():u()})}),fe(()=>{u()})},qe=(e,s={})=>{me(e)||ve("[useLockscreen]","You need to pass a ref param to this function");const c=s.ns||x("popup"),a=pe(()=>c.bm("parent","hidden"));if(!se||_(document.body,a.value))return;let r=0,d=!1,u="0";const n=()=>{setTimeout(()=>{Ce(document==null?void 0:document.body,a.value),d&&document&&(document.body.style.width=u)},200)};K(e,i=>{if(!i){n();return}d=!_(document.body,a.value),d&&(u=document.body.style.width),r=Ke(c.namespace.value);const v=document.documentElement.clientHeight<document.body.scrollHeight,f=ye(document.body,"overflowY");r>0&&(v||f==="scroll")&&d&&(document.body.style.width=`calc(100% - ${r}px)`),ge(document.body,a.value)}),be(()=>n())},ue=e=>{if(!e)return{onClick:V,onMousedown:V,onMouseup:V};let s=!1,c=!1;return{onClick:u=>{s&&c&&e(u),s=c=!1},onMousedown:u=>{s=u.target===u.currentTarget},onMouseup:u=>{c=u.target===u.currentTarget}}},Ge=J({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:j([String,Array,Object])},zIndex:{type:j([String,Number])}}),xe={click:e=>e instanceof MouseEvent},Je="overlay";var _e=Y({name:"ElOverlay",props:Ge,emits:xe,setup(e,{slots:s,emit:c}){const a=x(Je),r=i=>{c("click",i)},{onClick:d,onMousedown:u,onMouseup:n}=ue(e.customMaskEvent?void 0:r);return()=>e.mask?R("div",{class:[a.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:d,onMousedown:u,onMouseup:n},[C(s,"default")],X.STYLE|X.CLASS|X.PROPS,["onClick","onMouseup","onMousedown"]):he("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[C(s,"default")])}});const Qe=_e,re=Symbol("dialogInjectionKey"),ie=J({center:{type:Boolean,default:!1},alignCenter:{type:Boolean,default:!1},closeIcon:{type:ke},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),Ze={close:()=>!0},eo=["aria-label"],oo=["id"],to=Y({name:"ElDialogContent"}),so=Y({...to,props:ie,emits:Ze,setup(e){const s=e,{t:c}=Ee(),{Close:a}=De,{dialogRef:r,headerRef:d,bodyId:u,ns:n,style:i}=Q(re),{focusTrapRef:v}=Q(we),f=We(v,r),p=F(()=>s.draggable);return je(r,d,p),(t,m)=>($(),U("div",{ref:o(f),class:k([o(n).b(),o(n).is("fullscreen",t.fullscreen),o(n).is("draggable",o(p)),o(n).is("align-center",t.alignCenter),{[o(n).m("center")]:t.center},t.customClass]),style:ne(o(i)),tabindex:"-1"},[H("header",{ref_key:"headerRef",ref:d,class:k(o(n).e("header"))},[C(t.$slots,"header",{},()=>[H("span",{role:"heading",class:k(o(n).e("title"))},Me(t.title),3)]),t.showClose?($(),U("button",{key:0,"aria-label":o(c)("el.dialog.close"),class:k(o(n).e("headerbtn")),type:"button",onClick:m[0]||(m[0]=E=>t.$emit("close"))},[R(o(Ie),{class:k(o(n).e("close"))},{default:D(()=>[($(),q(Be(t.closeIcon||o(a))))]),_:1},8,["class"])],10,eo)):G("v-if",!0)],2),H("div",{id:o(u),class:k(o(n).e("body"))},[C(t.$slots,"default")],10,oo),t.$slots.footer?($(),U("footer",{key:0,class:k(o(n).e("footer"))},[C(t.$slots,"footer")],2)):G("v-if",!0)],6))}});var no=le(so,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const lo=J({...ie,appendToBody:{type:Boolean,default:!1},beforeClose:{type:j(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),ao={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[ae]:e=>Se(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},uo=(e,s)=>{const a=$e().emit,{nextZIndex:r}=Te();let d="";const u=Z(),n=Z(),i=S(!1),v=S(!1),f=S(!1),p=S(e.zIndex||r());let t,m;const E=Le("namespace",Fe),A=F(()=>{const g={},I=`--${E.value}-dialog`;return e.fullscreen||(e.top&&(g[`${I}-margin-top`]=e.top),e.width&&(g[`${I}-width`]=W(e.width))),g}),P=F(()=>e.alignCenter?{display:"flex"}:{});function N(){a("opened")}function T(){a("closed"),a(ae,!1),e.destroyOnClose&&(f.value=!1)}function z(){a("close")}function L(){m==null||m(),t==null||t(),e.openDelay&&e.openDelay>0?{stop:t}=ee(()=>y(),e.openDelay):y()}function w(){t==null||t(),m==null||m(),e.closeDelay&&e.closeDelay>0?{stop:m}=ee(()=>h(),e.closeDelay):h()}function M(){function g(I){I||(v.value=!0,i.value=!1)}e.beforeClose?e.beforeClose(g):w()}function O(){e.closeOnClickModal&&M()}function y(){se&&(i.value=!0)}function h(){i.value=!1}function l(){a("openAutoFocus")}function b(){a("closeAutoFocus")}function B(g){var I;((I=g.detail)==null?void 0:I.focusReason)==="pointer"&&g.preventDefault()}e.lockScroll&&qe(i);function ce(){e.closeOnPressEscape&&M()}return K(()=>e.modelValue,g=>{g?(v.value=!1,L(),f.value=!0,p.value=e.zIndex?p.value++:r(),Oe(()=>{a("open"),s.value&&(s.value.scrollTop=0)})):i.value&&w()}),K(()=>e.fullscreen,g=>{s.value&&(g?(d=s.value.style.transform,s.value.style.transform=""):s.value.style.transform=d)}),te(()=>{e.modelValue&&(i.value=!0,f.value=!0,L())}),{afterEnter:N,afterLeave:T,beforeLeave:z,handleClose:M,onModalClick:O,close:w,doClose:h,onOpenAutoFocus:l,onCloseAutoFocus:b,onCloseRequested:ce,onFocusoutPrevented:B,titleId:u,bodyId:n,closed:v,style:A,overlayDialogStyle:P,rendered:f,visible:i,zIndex:p}},ro=["aria-label","aria-labelledby","aria-describedby"],io=Y({name:"ElDialog",inheritAttrs:!1}),co=Y({...io,props:lo,emits:ao,setup(e,{expose:s}){const c=e,a=Ae();oe({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},F(()=>!!a.title)),oe({scope:"el-dialog",from:"custom-class",replacement:"class",version:"2.3.0",ref:"https://element-plus.org/en-US/component/dialog.html#attributes",type:"Attribute"},F(()=>!!c.customClass));const r=x("dialog"),d=S(),u=S(),n=S(),{visible:i,titleId:v,bodyId:f,style:p,overlayDialogStyle:t,rendered:m,zIndex:E,afterEnter:A,afterLeave:P,beforeLeave:N,handleClose:T,onModalClick:z,onOpenAutoFocus:L,onCloseAutoFocus:w,onCloseRequested:M,onFocusoutPrevented:O}=uo(c,d);Pe(re,{dialogRef:d,headerRef:u,bodyId:f,ns:r,rendered:m,style:p});const y=ue(z),h=F(()=>c.draggable&&!c.fullscreen);return s({visible:i,dialogContentRef:n}),(l,b)=>($(),q(Xe,{to:"body",disabled:!l.appendToBody},[R(Ve,{name:"dialog-fade",onAfterEnter:o(A),onAfterLeave:o(P),onBeforeLeave:o(N),persisted:""},{default:D(()=>[Ne(R(o(Qe),{"custom-mask-event":"",mask:l.modal,"overlay-class":l.modalClass,"z-index":o(E)},{default:D(()=>[H("div",{role:"dialog","aria-modal":"true","aria-label":l.title||void 0,"aria-labelledby":l.title?void 0:o(v),"aria-describedby":o(f),class:k(`${o(r).namespace.value}-overlay-dialog`),style:ne(o(t)),onClick:b[0]||(b[0]=(...B)=>o(y).onClick&&o(y).onClick(...B)),onMousedown:b[1]||(b[1]=(...B)=>o(y).onMousedown&&o(y).onMousedown(...B)),onMouseup:b[2]||(b[2]=(...B)=>o(y).onMouseup&&o(y).onMouseup(...B))},[R(o(ze),{loop:"",trapped:o(i),"focus-start-el":"container",onFocusAfterTrapped:o(L),onFocusAfterReleased:o(w),onFocusoutPrevented:o(O),onReleaseRequested:o(M)},{default:D(()=>[o(m)?($(),q(no,Re({key:0,ref_key:"dialogContentRef",ref:n},l.$attrs,{"custom-class":l.customClass,center:l.center,"align-center":l.alignCenter,"close-icon":l.closeIcon,draggable:o(h),fullscreen:l.fullscreen,"show-close":l.showClose,title:l.title,onClose:o(T)}),Ye({header:D(()=>[l.$slots.title?C(l.$slots,"title",{key:1}):C(l.$slots,"header",{key:0,close:o(T),titleId:o(v),titleClass:o(r).e("title")})]),default:D(()=>[C(l.$slots,"default")]),_:2},[l.$slots.footer?{name:"footer",fn:D(()=>[C(l.$slots,"footer")])}:void 0]),1040,["custom-class","center","align-center","close-icon","draggable","fullscreen","show-close","title","onClose"])):G("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,ro)]),_:3},8,["mask","overlay-class","z-index"]),[[He,o(i)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var fo=le(co,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const go=Ue(fo);export{go as E,Qe as a,qe as b,ue as c,je as u};
