import{as as n,aj as c,a as V,o as g,I as R,Q as u,j as p,q as o,n as i,ak as r}from"./index-4e66693d.js";import{E}from"./el-overlay-5d7acc48.js";import{a as k,b as C,E as I}from"./el-input-b637a84d.js";import{a as P,E as T}from"./el-table-column-1b23615c.js";import"./el-tag-3aed28f9.js";import{E as F}from"./el-button-bad787b3.js";import"./refs-cbced2c2.js";import"./scroll-45713807.js";import"./_initCloneObject-b40d657f.js";import"./debounce-562d200a.js";const $=e=>n.request({url:"/mall/sms-flash-promotion-session/add",method:"post",data:e}),N=e=>n.request({method:"get",url:"/mall/sms-flash-promotion-session/del/"+e.id}),y=e=>n.request({url:"/mall/sms-flash-promotion-session/edit",method:"post",data:e}),L=e=>n.request({url:"/mall/sms-flash-promotion-session/page",method:"post",data:e}),U=V({data(){return{topics:[],page:{current:0,size:10},sms:{id:0,memberId:0,memberPhone:"",productId:0,productName:"",sendTime:"",subsribeTime:""},dialogFormVisible:!1,formLabelWidth:70,dialogVisible:!1,choiceRow:{}}},mounted(){this.getPage()},methods:{del(e){N({id:e}).then(l=>{this.getPage()})},save(){this.choiceRow.id==0?$(this.choiceRow).then(e=>{this.dialogFormVisible=!1,this.getPage()}):y(this.choiceRow).then(e=>{this.dialogFormVisible=!1,this.getPage()})},handleEdit(e,l){this.choiceRow=l,this.dialogFormVisible=!0},toAdd(){this.choiceRow=this.sms,this.dialogFormVisible=!0},getPage(){L(this.page).then(e=>{console.log("收到的数据:"+JSON.stringify(e)),this.topics=e.data.page.records,console.log("----------------"+JSON.stringify(this.topics[0]))})}}}),W={class:""},v={class:"tools"},q={class:"dialog-footer"};function B(e,l,z,A,S,j){const m=F,a=T,h=P,d=k,s=C,b=I,f=E;return g(),R("div",W,[u("h3",null,[p(e.$slots,"default")]),u("div",v,[o(m,{icon:"Plus",onClick:e.toAdd},null,8,["onClick"])]),p(e.$slots,"header"),o(h,{data:e.topics,style:{width:"100%"}},{default:i(()=>[o(a,{prop:"id",label:"编号",width:"80"}),o(a,{prop:"memberId",label:"成员id",width:"180"}),o(a,{prop:"memberPhone",label:"成员电话",width:"180"}),o(a,{prop:"productId",label:"产品i",width:"180"}),o(a,{prop:"productName",label:"商品名称",width:"180"}),o(a,{prop:"sendTime",label:"发送时间",width:"180"}),o(a,{prop:"subscribeTime",label:"创建时间",width:"180"}),o(a,{label:"操作"},{default:i(t=>[o(m,{size:"small",onClick:w=>e.handleEdit(t.$index,t.row)},{default:i(()=>[r("编辑")]),_:2},1032,["onClick"]),o(m,{size:"small",type:"danger",onClick:w=>e.del(t.row.id)},{default:i(()=>[r("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),o(f,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":l[8]||(l[8]=t=>e.dialogFormVisible=t),title:"话题编辑"},{footer:i(()=>[u("span",q,[o(m,{onClick:l[7]||(l[7]=t=>e.dialogFormVisible=!1)},{default:i(()=>[r("取消")]),_:1}),o(m,{type:"primary",onClick:e.save},{default:i(()=>[r(" 保存 ")]),_:1},8,["onClick"])])]),default:i(()=>[o(b,{model:e.choiceRow,rules:e.rules},{default:i(()=>[o(s,{label:"编号","label-width":e.formLabelWidth,prop:"id"},{default:i(()=>[o(d,{modelValue:e.choiceRow.id,"onUpdate:modelValue":l[0]||(l[0]=t=>e.choiceRow.id=t),modelModifiers:{number:!0},autocomplete:"off",type:"text"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(s,{label:"成员id","label-width":e.formLabelWidth},{default:i(()=>[o(d,{modelValue:e.choiceRow.menberId,"onUpdate:modelValue":l[1]||(l[1]=t=>e.choiceRow.menberId=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(s,{label:"成员手机号","label-width":e.formLabelWidth},{default:i(()=>[o(d,{modelValue:e.choiceRow.memberPhone,"onUpdate:modelValue":l[2]||(l[2]=t=>e.choiceRow.memberPhone=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(s,{label:"产品Id","label-width":e.formLabelWidth},{default:i(()=>[o(d,{modelValue:e.choiceRow.productId,"onUpdate:modelValue":l[3]||(l[3]=t=>e.choiceRow.productId=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(s,{label:"产品名称","label-width":e.formLabelWidth},{default:i(()=>[o(d,{modelValue:e.choiceRow.productName,"onUpdate:modelValue":l[4]||(l[4]=t=>e.choiceRow.productName=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(s,{label:"发送时间","label-width":e.formLabelWidth},{default:i(()=>[o(d,{modelValue:e.choiceRow.sendTime,"onUpdate:modelValue":l[5]||(l[5]=t=>e.choiceRow.sendTime=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),o(s,{label:"会员订阅时间","label-width":e.formLabelWidth},{default:i(()=>[o(d,{modelValue:e.choiceRow.subsribeTime,"onUpdate:modelValue":l[6]||(l[6]=t=>e.choiceRow.subsribeTime=t),autocomplete:"off",rows:5,type:"textarea"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}const Y=c(U,[["render",B]]);export{Y as default};
